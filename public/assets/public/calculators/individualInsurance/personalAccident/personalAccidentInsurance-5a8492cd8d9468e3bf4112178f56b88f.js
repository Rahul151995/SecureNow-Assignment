//# sourceMappingURL=personalAccidentInsurance.js.map
$(document).ready(function(){var a=pageURL.searchParams.get("sumInsured");a&&($("#sumInsured").val(a),getQuotes(),showSection2())});var contactInfo,type,isQuoteDetailsSaved=$.Deferred();function getCalculatorRequest(){return{XLEW_1_4_3:$("#sumInsuredValue").val(),XLEW_2_8_3:$("#sumInsuredValue").val()?$("#sumInsuredValue").val():$("#sumInsured").val(),XLEW_2_13_3:$("#medicalExpenses").val()}}
function getQuotes(){"Covered"==$("#medicalExpenses").val()?($("#accidentalBlock").show(),$("#fractureBlock").show()):($("#accidentalBlock").hide(),$("#fractureBlock").hide());jQuery.ajax({type:"POST",url:calculatorURL+"personalAccidentNewCalc",data:JSON.stringify(getCalculatorRequest()),crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"X-Requested-With"},dataType:"json",contentType:"application/json",success:function(a,b,c){populate(a);$("#prospectId").val()&&
saveQuoteDetails()},error:function(a,b,c){console.log("personalAccidentCalc Calculator Contact failed");showCalculatorError("Server Error! Please try again later")}})}function populate(a){document.getElementById("netPremium0").textContent=eedisplayFloatNDTh(a.XLEW_2_5_3,0);document.getElementById("accidentalHospitalization").textContent=a.XLEW_2_14_3;document.getElementById("fractures").textContent=a.XLEW_2_15_3}
function buyNowProposalPage(){var a=document.createElement("form");a.action="/api/v1/personalAccidentReligare/getProposalPage";a.method="get";input=document.createElement("input");partner=document.createElement("input");input.name="sumInsured";input.value=$("#sumInsuredValue").val();a.appendChild(input);input=document.createElement("input");input.name="premium";input.value=$("#netPremium0").text();a.appendChild(input);var b=pageURL.searchParams.get("partner");b&&(partner.name="partner",partner.value=
b,a.appendChild(partner));input=document.createElement("input");input.name="mobile";input.value=contactInfo.mobile;a.appendChild(input);input=document.createElement("input");input.name="email";input.value=contactInfo.email;a.appendChild(input);input=document.createElement("input");input.name="prospectId";input.value=$("#prospectId").val();a.appendChild(input);input=document.createElement("input");input.name="quoteId";input.value=$("#quoteId").val();a.appendChild(input);document.body.appendChild(a);
a.submit()}function showCalculatorError(a){a?$("#calculatorErrorMessage").html(a):$("#calculatorErrorMessage").html("Internal Server Error");$("#calculatorErrorMessage").css("visibility","visible");$("html, body").animate({scrollTop:30},1E3);hideCalculatorError()}function hideCalculatorError(){setTimeout(function(){$("#calculatorErrorMessage").css("visibility","hidden")},3E3)}
$(document).ready(function(){700<=$(window).width()&&$("td:not(:first-child)").each(function(){var a=$(this),b=a.index()+1;a.mouseenter(function(){$("tr > td:nth-child("+b+")").addClass("hover")}).mouseleave(function(){$("tr > td:nth-child("+b+")").removeClass("hover")})})});var eedecreg=/\./g,eeth=",",near0RegExp=/[.](.*0000000|.*9999999)/,eedec=".";function eeparseFloat(a){a=String(a).replace(eedecreg,".");a=parseFloat(a);return isNaN(a)?0:a}
function eedisplayFloatNDTh(a,b){if(myIsNaN(a))return Number.NaN;var c=round(a,b);if(0<b){c=String(c);if(-1!=c.indexOf("e")||-1!=c.indexOf("E"))return c;var d=c.split("."),c=eeinsertThousand(d[0].toString()),d=2>d.length?"00000000000000".substring(0,b):(d[1].toString()+"00000000000000").substring(0,b);return c+eedec+d}return eeinsertThousand(c.toString())}function myIsNaN(a){return isNaN(a)||"number"==typeof a&&!isFinite(a)}
function round(a,b){if(isFinite(a)&&isFinite(b)){var c=0>a?-1:1,d=Math.abs(a),e=Math.pow(10,b);return c*Math.round(d*e)/e}return NaN}function eeinsertThousand(a){if(""==a||0<=a.indexOf("e"))return a;var b="";"-"==a.charAt(0)&&(b="-",a=a.substring(1));for(var c="",d=a.length-1,e=0;e<=d;e++)0<e&&0==e%3&&(c=eeth+c),c=a.charAt(d-e)+c;return b+c}
function sumAssuredSubmit(){document.getElementById("section-1").style.display="none";document.getElementById("section-2").style.display="";getQuotes();callConversionCode()}function callConversionCode(){$("#selectedProduct").val();(new Image).src="//www.googleadservices.com/pagead/conversion/1024240456/?label=FCUbCLLKjogBEMjWsugD&guid=ON&script=0"}function buyNowPA(){buyNowProposalPage()}
$(document).ready(function(){$("#sumInsured").change(function(){$("#sumInsuredValue").val($("#sumInsured").val())});$("#sumInsuredValue").change(function(){$("#sumInsured").val($("#sumInsuredValue").val())})});
function getContactInfo(){var a=pageURL.searchParams.get("partner"),b="Online";null!=$("#couponCode").val()&&""!=$("#couponCode").val()&&(b="Coupon");return contactInfo={prospectId:$("#prospectId").val(),name:$("#company").val(),location:$("#location").val(),mobile:$("#mobile").val(),email:$("#email").val(),product:$("#selectedProduct").val(),partnerId:a?a:null,channel:b,leadSource:String(pageURL),googleClickID:pageURL.searchParams.get("gclid"),couponCode:$("#couponCode").val(),sumInsured:$("#sumInsuredValue").val(),
premium:$("#netPremium0").text(),medicalExpenses:$("#medicalExpenses").val(),quoteId:$("#quoteId").val()}}function submit(){validateProspectDetails()&&(saveContactInfo(),isContactDetailsSaved.done(function(a){saveQuoteDetails()}),isQuoteDetailsSaved.done(function(a){$("#BuyNowModal-with-proposalForm").remodal().close();"downloadPdf"==type?downloadPdf():"sendPdf"==type?sendPdf():"buy"==type&&buyNowPA()}))}
function saveContactInfo(){contactInfo=getContactInfo();$.ajax({url:"/api/v1/createOrUpdateProspect",type:"POST",data:contactInfo,success:function(a){1==a.isSuccess?($("#prospectId").val(a.data.prospectId),$("#sentQuoteEmailAddress").text(contactInfo.email),isContactDetailsSaved.resolve()):showError(a.error)},error:function(a,b,c){showError("Server Error! Please try again later");return!1}})}
function saveQuoteDetails(){contactInfo=getContactInfo();$.ajax({url:"/api/v1/saveIndividualAccidentQuoteDetails.json",type:"POST",data:contactInfo,beforeSend:function(){$("body").append('<div id="cssloader-wrapper"><div class="cssloader"></div></div>')},success:function(a){if(a.isSuccess)$("#cssloader-wrapper").remove(),$("#prospectId").val(a.data.prospectId),$("#quoteId").val(a.data.quoteId),isQuoteDetailsSaved.resolve();else return $("#cssloader-wrapper").remove(),showContactInfoError("Internal Server Error! Please try after some time",
"#location"),!1},error:function(a,b,c){showContactInfoError("Internal Server Error! Please try after some time");return!1}})}
function validateProspectDetails(){contactInfo=getContactInfo();if(contactInfo.name)if(contactInfo.location)if(contactInfo.mobile)if(isValidMobile(contactInfo.mobile)){if(!contactInfo.email)return showContactInfoError("Please enter your Email id","#email"),!1;if(!isValidEmail(contactInfo.email))return showContactInfoError("Not a Valid Email","#email"),!1}else return showContactInfoError("Not a Valid Mobile","#mobile"),!1;else return showContactInfoError("Please enter your mobile number.","#mobile"),
!1;else return showContactInfoError("Please enter location","#location"),!1;else return showContactInfoError("Please enter your Name.","#company"),!1;return!0}function openPopUp(a){type=a;$("#prospectId").val()?"downloadPdf"==a?downloadPdf():"sendPdf"==a?sendPdf():"buy"==a&&buyNowPA():$("#BuyNowModal-with-proposalForm").remodal().open()}function downloadPdf(){var a="/personalAccident/downloadPDF?id="+$("#quoteId").val();window.open(a)}
function sendPdf(){var a="/personalAccident/sendPDFEmail?id="+$("#quoteId").val();$("#emailSentModal").remodal().open();$.ajax({url:a,success:function(a){console.log(a.result)},error:function(a,c,d){console.log("error = "+a)}})}
function showContactInfoError(a,b){a?$("#errorMessageProposalPopUp").html(a):$("#errorMessageProposalPopUp").html("Valid Mobile Number Required");b&&$(b).focus();$("#errorMessageProposalPopUp").css("visibility","visible");setTimeout(function(){hideContactInfoError()},3E3)}function hideContactInfoError(){$("#errorMessageProposalPopUp").css("visibility","hidden")};