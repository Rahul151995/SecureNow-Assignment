//# sourceMappingURL=adityaBirlaHealthInsurance.js.map
var age,isSliderCreated=!1,otp,familySizeString="Self",familySize=1,premiumId="",child=0,spouse=!1,adult=1,isContactDetailsSaved=$.Deferred();$(document).ready(function(){var a=pageURL.searchParams.get("age");a&&$("#age").val(a)});
function ageSubmit(a){validateAge();ga("send","event",{eventCategory:"Get_Quote",eventAction:"Next_Button",eventLabel:"Quote_Next_Button_Health_insurance"});validateAge()&&(document.getElementById("section-1").style.display="none",document.getElementById("section-2").style.display="");null==a||"2"!=a.adult||"1"!=a.child&&"2"!=a.child&&"0"!=a.child?(setFamilyDefaultValue(),getQuotes()):calculateTotalMember(a.adult,a.child)}
function validateAge(){age=$("#age").val();if(""==age||null==age)return showError("Age is Required","#age"),!1;hideError();return!0}function showSection2(){$("#section-1").hide();$("#section-2").show()}function hideSection2(){$("#section-1").show();$("#section-2").hide()}function iframeShowSection3(){$("#section-2").hide();$("#section-3").show()}function calculateFamilySize(){adult=familySize=1;$("#familyDetails1").is(":checked")&&(familySize+=1,adult+=1);familySize+=child}
function generateFamilySizeString(){if(spouse&&0==child)return"Self+Spouse";if(spouse&&0<child){var a="Kid";1<child&&(a="Kids");return"Self+Spouse+"+child+a}return!spouse&&0<child?"Self+"+child+"Kid":"Self"}
function checkUncheckSpouse(){spouse=$("#familyDetails1").is(":checked");var a=$("#familyDetails2").is(":checked"),b=$("#familyDetails3").is(":checked");!spouse&(a||b)&&(document.getElementById("familyDetails2").checked=!1,document.getElementById("familyDetails3").checked=!1,child=0,showFamilySizeError("Please Select Spouse First as well"));generateFamilySizeDetails()}
function calculateTotalChild(a,b,c){spouse=$("#familyDetails1").is(":checked");var e=$("#familyDetails2").is(":checked"),d=$("#familyDetails3").is(":checked");!spouse&(e||d)&&(document.getElementById("familyDetails2").checked=!1,document.getElementById("familyDetails3").checked=!1,showFamilySizeError("Please Select Spouse First as well"));document.getElementById(c).checked=!1;child=1==document.getElementById(b).checked?a:0;generateFamilySizeDetails()}
function generateFamilySizeDetails(){familySizeString=generateFamilySizeString();console.log(familySizeString);calculateFamilySize();getQuotes()}function showFamilySizeError(a){$("#familyDetailsError").html(a);$("#familyDetailsError").css("visibility","visible");setTimeout(function(){hideFamilySizeError()},3E3)}function hideFamilySizeError(){$("#familyDetailsError").css("visibility","hidden")}
function setFamilyDefaultValue(){familySizeString="Self";adult=familySize=1;child=0;$("#familyDetails0").prop("checked",!0);$("#familyDetails1").prop("checked",!1);$("#familyDetails2").prop("checked",!1);$("#familyDetails3").prop("checked",!1);$("#familyDetails4").prop("checked",!1)}
function getCalculatorRequest(){var a=document.getElementById("age"),a=a.options[a.selectedIndex].value,b=$("input[name=sumInsured]:checked").val();null===b&&(b=1E5);return{XLEW_1_4_4:a,XLEW_2_2_3:familySizeString,XLEW_2_3_3:b}}
function getQuotes(){jQuery.ajax({type:"POST",url:calculatorURL+"adityaBirlaHealthInsuranceCalc",data:JSON.stringify(getCalculatorRequest()),crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"X-Requested-With"},dataType:"json",contentType:"application/json",success:function(a,b,c){populate(a)},error:function(a,b,c){console.log("WC Calculator Contact failed");showCalculatorError("Server Error! Please try again later")}})}
function showError(a,b){a?$("#ageErrorMessage").html(a):$("#ageErrorMessage").html("All fields required");b&&$(b).focus();$("#ageErrorMessage").css("visibility","visible");setTimeout(function(){hideError()},3E3)}function hideError(){$("#ageErrorMessage").css("visibility","hidden")}
function populate(a){document.getElementById("XLEW_2_6_3").innerHTML=round(a.XLEW_2_6_3,0);3E5>=a.XLEW_2_3_3?(document.getElementById("normalRoomRent").innerHTML="Shared Room",document.getElementById("icuRoomRent").innerHTML="Shared Room"):(document.getElementById("normalRoomRent").innerHTML="Single AC Room",document.getElementById("icuRoomRent").innerHTML="Single AC Room")}
function buyNow(){$("#location").typeahead("destroy");fetchLocationsBuyNow();$("#BuyNowModal-with-proposalForm").remodal().open();showProceedToProposal()}
function buyNowProposalPage(){var a=document.createElement("form");a.action="/api/v1/aditya-birla/proposal-form";a.method="post";input=document.createElement("input");input.name="premimum";input.value=document.getElementById("XLEW_2_6_3").innerHTML;a.appendChild(input);input=document.createElement("input");input.name="sumInsured";input.value=$("input[name=sumInsured]:checked").val();a.appendChild(input);input=document.createElement("input");input.name="mobile";input.value=prospectDetails.mobile;a.appendChild(input);
input=document.createElement("input");input.name="email";input.value=prospectDetails.email;a.appendChild(input);input=document.createElement("input");input.name="familySize";input.value=familySizeString;a.appendChild(input);"Self"===familySizeString?(input=document.createElement("input"),input.name="totalAdult",input.value="1",a.appendChild(input),input=document.createElement("input"),input.name="totalChild",input.value="0"):"Self+Spouse"===familySizeString?(input=document.createElement("input"),
input.name="totalAdult",input.value="2",a.appendChild(input),input=document.createElement("input"),input.name="totalChild",input.value="0"):"Self+Spouse+1Kid"===familySizeString?(input=document.createElement("input"),input.name="totalAdult",input.value="2",a.appendChild(input),input=document.createElement("input"),input.name="totalChild",input.value="1"):(input=document.createElement("input"),input.name="totalAdult",input.value="2",a.appendChild(input),input=document.createElement("input"),input.name=
"totalChild",input.value="2");a.appendChild(input);input=document.createElement("input");input.name="age";var b=document.getElementById("age");input.value=b.options[b.selectedIndex].value;a.appendChild(input);if(b=pageURL.searchParams.get("partner"))input=document.createElement("input"),input.name="partnerId",input.value=b,a.appendChild(input);input=document.createElement("input");input.name="prospectId";input.value=$("#prospectId").val();a.appendChild(input);document.body.appendChild(a);a.submit()}
function round(a,b){if(isFinite(a)&&isFinite(b)){var c=0>a?-1:1,e=Math.abs(a),d=Math.pow(10,b);return c*Math.round(e*d)/d}return NaN}function calculateTotalMember(a,b){$("#familyDetails0").prop("checked",!0);2==a?($("#familyDetails1").prop("checked",!0),spouse=!0,1==b?(child=1,$("#familyDetails2").prop("checked",!0)):2==b?(child=2,$("#familyDetails3").prop("checked",!0)):child=0):(adult=1,child=0);generateFamilySizeDetails()}
function showProceedToProposal(){$("#contactFormTitleFamilyHealthInsurance").show();$("#contactFormTitleFamilyHealthInsuranceCompare").hide();$("#contactFormFamilyHealthInsurance").show();$("#contactFormFooterFamilyHealthInsurance").show();$("#buy-now").show();$("#compare-now").hide();$("#thankyouBuyNowNew").hide()}
function fetchLocationsBuyNow(){$.ajax({url:"/public/getLocation",type:"GET",success:function(a){if(a.isSuccess){var b=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.nonword(a)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:a.data.cityList});b.initialize();$("#location").typeahead({highlight:!0,hint:!1,minLength:1},{name:"location",limit:50,source:b.ttAdapter()}).on("change blur",function(){match=!1;$.each(b.index.datums,function(a,b){$("#location").val()==b&&(match=
!0)});match||$("#location").val("")});return!0}showContactInfoError(a.message);return!1},error:function(a,b,c){}})}function showContactInfoError(a,b){a?$("#errorMessageProposalPopUp").html(a):$("#errorMessageProposalPopUp").html("Valid Mobile Number Required");b&&$(b).focus();$("#errorMessageProposalPopUp").css("visibility","visible");setTimeout(function(){hideContactInfoError()},3E3)}function hideContactInfoError(){$("#errorMessageProposalPopUp").css("visibility","hidden")}
function submitFromBuyNow(){if(!validateAdityBirlaContactInfoPopup())return!1;createProspectFromAdityBirla();isContactDetailsSaved.done(function(a){"true"==document.getElementById("askContactInfo").value&&buyNowProposalPage()})}$("#mobile").on("keypress",function(a){if(0==this.value.length&&48==a.which)return showContactInfoError("Invalid Mobile Number (can't start with '0')","#mobile"),!1});
function validateAdityBirlaContactInfoPopup(){prospectDetails=getAdityaBirlaContactInfo();if(""==prospectDetails.name)return showContactInfoError("Name is Required","#name"),!1;if(""==prospectDetails.location)return showContactInfoError("Please enter location","#location"),!1;if(""==prospectDetails.mobile)return showContactInfoError("Mobile number required","#mobile"),!1;if("0"==prospectDetails.mobile.charAt(0))return showContactInfoError("Invalid Mobile Number (can't start with '0')","#mobile"),
!1;if(isValidMobile(prospectDetails.mobile)){if(""==prospectDetails.email)return showContactInfoError("Email required","#mobile"),!1;if(!isValidEmail(prospectDetails.email))return showContactInfoError("Not a Valid Email","#email"),!1}else return showContactInfoError("Not a Valid Mobile","#mobile"),!1;hideContactInfoError();return!0}
function getAdityaBirlaContactInfo(){return{product:$("#selectedProduct").val(),prospectId:$("#prospectId").val(),name:$("#name").val(),location:$("#location").val(),mobile:$("#mobile").val(),email:$("#email").val(),couponCode:$("#couponCode").val(),leadSource:String(pageURL),googleClickID:pageURL.searchParams.get("gclid"),age:age,sumInsured:$("input[name=sumInsured]:checked").val(),familySize:familySizeString,totalChild:child,totalAdult:adult,comment:"Prospect created for "+this.insurerNameComplete}}
function createProspectFromAdityBirla(){$("#prospectId").val()?(prospectDetails.prospectId=$("#prospectId").val(),isContactDetailsSaved.resolve()):($("#partnerId").val()&&(prospectDetails.partnerId=$("#partnerId").val()),$.ajax({url:"/api/v1/createOrUpdateProspect",type:"POST",data:prospectDetails,success:function(a){console.log("Save Prospet response "+JSON.stringify(a));if(1==a.isSuccess)return $("#prospectId").val(a.data.prospectId),prospectDetails.prospectId=a.data.prospectId,isContactDetailsSaved.resolve(),
!0;showContactInfoError("Internal Server Error! Please try after some time");return!1},error:function(a,b,c){showContactInfoError("Internal Server Error! Please try after some time");return!1}}))}function showContactInfoError(a,b){a?$("#errorMessageProposalPopUp").html(a):$("#errorMessageProposalPopUp").html("Valid Mobile Number Required");b&&$(b).focus();$("#errorMessageProposalPopUp").css("visibility","visible");setTimeout(function(){hideContactInfoError()},3E3)}
function hideContactInfoError(){$("#errorMessageProposalPopUp").css("visibility","hidden")}function showThankYou(){$("#contactFormTitleFamilyHealthInsurance").hide();$("#contactFormTitleFamilyHealthInsuranceCompare").hide();$("#contactFormFamilyHealthInsurance").hide();$("#contactFormFooterFamilyHealthInsurance").hide();$("#proceedToProposalForm").hide();$("#thankyouBuyNowNew").show()};