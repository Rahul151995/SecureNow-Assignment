//# sourceMappingURL=mintMediclaimRating.js.map
var rowId="row",count=1,isContactDetailsSaved=$.Deferred(),details;$(document).ready(function(){var a=pageURL.searchParams.get("age");a&&($("#age").val(a),getFamilySizeDropDown(),ageSubmit(),$(".chat-button").remove(),$(".btn-buy").remove(),$(".call-panel").remove(),$(".emailRatings").remove(),$(".parentEmailPDF").show());$("#age").keyup(function(a){13==a.keyCode&&ageSubmit()});checkOffset()});
function checkOffset(){$(window).scroll(function(){footertotop=$(".footer-links").position().top;scrolltop=$(document).scrollTop()+920;difference=scrolltop-footertotop;scrolltop>footertotop?$("#social-float, .float-logo").css("margin-top",0-difference):$("#social-float, .float-logo").css("margin-top",0)})}function ageSubmit(){validateAge()&&(document.getElementById("section-1").style.display="none",document.getElementById("section-2").style.display="",getQuotes(),callConversionCode())}
function validateAge(){var a=$("#age").val();if(!a)return showError("Age is Required","#age"),!1;if(18>a||75<a)return showError("Only ages 18 to 75 accepted","#age"),!1;hideError();return!0}function callConversionCode(){$("#selectedProduct").val();(new Image).src="//www.googleadservices.com/pagead/conversion/1024240456/?label=5Kx0CNGq8IcBEMjWsugD&guid=ON&script=0"}
function getQuotes(){jQuery.ajax({type:"Post",url:calculatorURL+"mintSecureNowMediclaimCalc11Sep2020",data:JSON.stringify(getCalculatorRequest()),crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"X-Requested-With"},dataType:"json",contentType:"application/json",beforeSend:function(){$("body").append('<div class="spinner-div"></div>')},success:function(a,b,c){deleteTableRows();setTimeout(function(){$(".spinner-div").hide()},1E3);populate(a)},error:function(a,
b,c){console.log("Mint SecureNow Mediclaim Calculator Contact failed");showCalculatorError("Server Error! Please try again later")}})}function getCalculatorRequest(){return{XLEW_1_4_6:parseInt($("#age").val()),XLEW_2_5_6:$("select#familySize").val()?$("select#familySize").val():"Individual",XLEW_2_6_6:$("input[name=sumInsured]:checked").val()}}
function populate(a){var b=9,c="";count=1;for(document.getElementById("quotePageage").value=a.XLEW_2_4_6;""!=a["XLEW_2_"+b+"_4"];)rowId="row"+count,c+="<tr id="+rowId+"><td><div>"+a["XLEW_2_"+b+"_4"]+"</div></td><td><div>"+a["XLEW_2_"+b+"_5"]+"</div></td><td><div>"+parseInt(replaceAll(a["XLEW_2_"+b+"_6"].toString(),",",""))+"</div></td><td><div>"+Math.round(a["XLEW_2_"+b+"_7"]+"e+2")+"%</div></td><td><div>"+a["XLEW_2_"+b+"_8"]+"</div></td></tr>",$("#quoteTable").append(c),c="",b+=1,count+=1;hoverCall()}
function replaceAll(a,b,c){return a.replace(new RegExp(escapeRegExp(b),"g"),c)}function escapeRegExp(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function deleteTableRows(){for(;0<=count;)$("#row"+count).remove(),--count}$(document).ready(function(){$(".emailRatings").click(function(){$("#location").typeahead("destroy");fetchLocations();$("#contactPopupSendPdfMail").remodal().open()});$(".emailPDF").click(function(){$("#sendEmailPDF").remodal().open()})});
function hideSection2(){$("#section-1").show();$("#section-2").hide()}function hideError(a){$(a).attr("data-original-title","Maximum Age can be 75 Years.")}function showError(a,b){a&&$(b).attr("data-original-title",a);b&&$(b).focus();setTimeout(function(){hideError(b)},2E3)}
function sendEmail(){isContactDetailsSaved=$.Deferred();if("opened"==$("#contactPopupSendPdfMail").remodal().getState()&&!validateMintMediclaimContactInfoPopup())return!1;createProspectForMSMR();isContactDetailsSaved.done(function(a){sendMSMRPdfMail()})}
function validateMintMediclaimContactInfoPopup(){details=getContactInfo();if(""==details.name)return showContactInfoError("Name is Required","#name"),!1;if(""==details.location)return showContactInfoError("Please enter location","#location"),!1;if(""==details.mobile)return showContactInfoError("Mobile number required","#mobile"),!1;if(isValidMobile(details.mobile)){if(""==details.email)return showContactInfoError("Email required","#mobile"),!1;if(!isValidEmail(details.email))return showContactInfoError("Not a Valid Email",
"#email"),!1}else return showContactInfoError("Not a Valid Mobile","#mobile"),!1;hideContactInfoError();return!0}function showContactInfoError(a,b){a?$("#errorMessageProposalPopUp").html(a):$("#errorMessageProposalPopUp").html("Valid Mobile Number Required");b&&$(b).focus();$("#errorMessageProposalPopUp").css("visibility","visible");setTimeout(function(){hideContactInfoError()},3E3)}function hideContactInfoError(){$("#errorMessageProposalPopUp").css("visibility","hidden")}
function getContactInfo(){return{prospectId:$("#prospectId").val(),name:$("#name").val(),location:$("#location").val(),mobile:$("#mobile").val(),email:$("#email").val(),age:$("#age").val(),sumInsured:$("input[name=sumInsured]:checked").val(),familySize:$("select#familySize").val(),emailId:$("#emailId").val(),closestAge:$("#quotePageage").val(),product:95}}
function fetchLocations(){$.ajax({url:"/public/getLocation",type:"GET",success:function(a){if(a.isSuccess){var b=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.nonword(a)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:a.data.cityList});b.initialize();$("#location").typeahead({highlight:!0,hint:!1,minLength:1},{name:"location",limit:50,source:b.ttAdapter()}).on("change blur",function(){match=!1;$.each(b.index.datums,function(a,b){$("#location").val()==b&&(match=!0)});
match||$("#location").val("")});return!0}showContactInfoError(a.message);return!1},error:function(a,b,c){}})}
function createProspectForMSMR(){$("#prospectId").val()?(details.prospectId=$("#prospectId").val(),isContactDetailsSaved.resolve()):$.ajax({url:"/api/v1/createOrUpdateProspect",type:"POST",data:details,success:function(a){console.log("Save Prospet response "+JSON.stringify(a));if(1==a.isSuccess)return $("#prospectId").val(a.data.prospectId),details.prospectId=a.data.prospectId,isContactDetailsSaved.resolve(),!0;showContactInfoError("Internal Server Error! Please try after some time");return!1},error:function(a,
b,c){showContactInfoError("Internal Server Error! Please try after some time");return!1}})}
function sendMSMRPdfMail(){$.ajax({url:"/api/v1/sendMintMediclaimPdfMail",type:"POST",data:details,beforeSend:function(){$("#contactPopupSendPdfMail").append('<div class="spinner-div"></div>')},success:function(a){$(".spinner-div").hide();a.isSuccess?($(".success-msg").css("display","block"),$(".success-msg").html("<p>Mail sent successfully..!!</p>")):($(".success-msg").css("display","block"),$(".success-msg").html("<p class='text-danger'>Mail not sent</p>"));setTimeout(function(){$(".success-msg").css("display",
"none");$("#contactPopupSendPdfMail").remodal().close()},3E3)},error:function(a,b,c){console.log("error = "+a)}})}
function getFamilySizeDropDown(){jQuery.ajax({type:"Post",url:calculatorURL+"mintSecureNowMediclaimCalc11Sep2020",data:JSON.stringify(getCalculatorRequest()),crossDomain:!0,async:!1,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"X-Requested-With"},dataType:"json",contentType:"application/json",success:function(a,b,c){a="FF"==a.EE.eeGlobal.XLEW_2_5_6.s1?a.EE.eeGlobal.XLEW_2_5_6.sa1.arr.slice(0,2):a.EE.eeGlobal.XLEW_2_5_6.sa1.arr.slice(0,1);$("select#familySize option").remove();
for(b=0;b<a.length;b++)$("select#familySize").append($("<option/>").val(a[b][1]).text(a[b][1]));$("select#familySize option:first").attr("selected","selected")},error:function(a,b,c){console.log("Mint securenow Mediclaim Rating Calculator Contact failed");showCalculatorError("Server Error! Please try again later")}})}
function hoverCall(){$("td:not(:first-child):not(:nth-child(2)").each(function(){var a=$(this),b=a.index()+1;a.mouseenter(function(){$("tr > td:nth-child("+b+")").addClass("hover")}).mouseleave(function(){$("tr > td:nth-child("+b+")").removeClass("hover")})})}function openFHIQuotePage(){window.open("/individual-insurance/health-insurance?age="+$("#age").val(),"_self")}
function sendEmailPdf(){details=getContactInfo();if(!$("#emailId").val())return showEmailError("Email required","#emailId"),!1;if(!isValidEmail($("#emailId").val()))return showEmailError("Not a Valid Email","#emailId"),!1;$.ajax({url:"/api/v1/sendMintMediclaimPdfMail",type:"POST",data:details,beforeSend:function(){$("#sendEmailPDF").append('<div class="spinner-div"></div>')},success:function(a){$(".spinner-div").hide();a.isSuccess?($(".success-msg").css("display","block"),$(".success-msg").html("<p>Mail sent successfully..!!</p>")):
($(".success-msg").css("display","block"),$(".success-msg").html("<p class='text-danger'>Mail not sent</p>"));setTimeout(function(){$(".success-msg").css("display","none");$("#sendEmailPDF").remodal().close()},3E3)},error:function(a,b,c){console.log("error = "+a)}})}function showEmailError(a,b){a&&$("#errorMessage").html(a);b&&$(b).focus();$("#errorMessage").css("visibility","visible");setTimeout(function(){hideEmailError()},3E3)}
function hideEmailError(){$("#errorMessage").css("visibility","hidden")}function setProspectIdNull(){$("#prospectId").val("")}$(document).ready(function(){$(".thumbs img").attr("src","https://i.ytimg.com/vi/OmR0PRMF-F4/hqdefault.jpg");$(".newoverlay").attr("src","https://www.youtube.com/embed/OmR0PRMF-F4");$(".thumbs h3").html("An interview of Deepti Bhaskaran, editor, personal finance, Mint.");autoPlayYouTubeModal()});
function autoPlayYouTubeModal(){console.log("m here");$(".trigger").click(function(a){a.preventDefault();var b=$(this).data("target");a=$(this).attr("src")+"?autoplay=1&mute=1&enablejsapi=1";$(b+" iframe").attr("src",a);$(b).on("hidden.bs.modal",function(a){$(b+" iframe").attr("src","")})})};